{% set collapseClass = 'avatar-collapse' %}
<form method="post" class="account-editor" data-request="onUpdateProfile"
    data-request-update="{ _self: true, 'site/mini-user-profile': '#siteMiniUserProfile' }" data-request-files
    data-request-flash>

    <input type="hidden" name="message" value="false" />
    <div class="editor-view collapse show {{ collapseClass }} avatar-image">
        <img src="{{ user.getAvatarThumb(256) }}" alt="Profile Picture" class="img-thumbnail" />
    </div>
    <div class="editor-edit">
        <input name="avatar" type="file" value="" class="form-control" accept=".jpg,.jpeg,.bmp,.png,.webp,.gif" />
        <div class="section-actions">
            <button class="btn btn-primary" data-attach-loading type="submit">
                Сохранить
            </button>
            {% if user.avatar is not empty %}
            <button class="btn btn-secondary" data-attach-loading data-request="onUpdateProfile"
                data-request-update="{ _self: true, 'site/mini-user-profile': '#siteMiniUserProfile' }"
                data-request-data="{ remove_avatar: true, message: null }" type="button">
                Удалить
            </button>
            {% endif %}
            <button class="btn btn-link" data-bs-toggle="collapse" data-bs-target=".{{ collapseClass }}" type="reset">
                Отмена
            </button>
        </div>
    </div>
</form>